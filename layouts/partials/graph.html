<script src="https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js"
    integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin="anonymous"></script>
<!-- <script src="https://cdn.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.js" ></script> -->



<h3>Interactive Graph</h3>
<div id="graph-container"></div>
<style>
    :root {
        --g-node: var(--secondary);
        --g-node-active: var(--primary);
        --g-node-inactive: var(--visited);
        --g-link: var(--outlinegray);
        --g-link-active: #5a7282;
    }
</style>

{{ $js := resources.Get "js/graph.js" | resources.Fingerprint "md5" }}
<script src="{{ $js.Permalink }}"></script>

<script>
    drawGraph(
        {{ strings.TrimRight "/" .Page.Permalink }},
        {{ strings.TrimRight "/" .Site.BaseURL }},
        {{ $.Site.Data.graphConfig.paths }},
        {{ $.Site.Data.graphConfig.depth }},
        {{ $.Site.Data.graphConfig.enableDrag }},
        {{ $.Site.Data.graphConfig.enableLegend }},
        {{ $.Site.Data.graphConfig.enableZoom }},
        {{ $.Site.Data.graphConfig.scale }},
        {{ $.Site.Data.graphConfig.repelForce }},
        {{ $.Site.Data.graphConfig.centerForce }},
        {{ $.Site.Data.graphConfig.linkDistance }},
        {{ $.Site.Data.graphConfig.fontSize }},
        {{ $.Site.Data.graphConfig.opacityNode }},
        {{ $.Site.Data.graphConfig.labelBottom }},
        {{ $.Site.Data.graphConfig.squareFrame }}
    )

</script>

<!-- this looks like it would be better to pars YAML to object.
then use the object as argument for drawGraph function (destructuring it afterward if needed).

I made a graph2.html for the index page. Make sure to update it if you change drawGraph() variables

need doing : groupe color by tag -->